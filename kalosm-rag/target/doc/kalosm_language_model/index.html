<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Language Model"><title>kalosm_language_model - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-916cea96.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="kalosm_language_model" data-themes="" data-resource-suffix="" data-rustdoc-version="1.87.0 (17067e9ac 2025-05-09)" data-channel="1.87.0" data-search-js="search-e7298875.js" data-settings-js="settings-d72f25bb.js" ><script src="../static.files/storage-82c7156e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-fb8c74a8.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../kalosm_language_model/index.html">kalosm_<wbr>language_<wbr>model</a><span class="version">0.4.1</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#language-model" title="Language Model">Language Model</a><ul><li><a href="#usage-with-the-kalosm-llama-implementation-crate" title="Usage (with the kalosm-llama implementation crate)">Usage (with the kalosm-llama implementation crate)</a></li></ul></li></ul><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>kalosm_language_model</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/kalosm_language_model/lib.rs.html#1-44">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="language-model"><a class="doc-anchor" href="#language-model">§</a>Language Model</h2>
<p>This crate provides a unified interface for language models. It supports streaming text, sampling, and embedding.</p>
<h3 id="usage-with-the-kalosm-llama-implementation-crate"><a class="doc-anchor" href="#usage-with-the-kalosm-llama-implementation-crate">§</a>Usage (with the kalosm-llama implementation crate)</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>kalosm::language::<span class="kw-2">*</span>;

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="kw">let </span><span class="kw-2">mut </span>model = Llama::phi_3().<span class="kw">await</span>.unwrap();
    <span class="kw">let </span>prompt = <span class="string">"The capital of France is "</span>;
    <span class="kw">let </span><span class="kw-2">mut </span>result = model.complete(prompt);

    <span class="macro">print!</span>(<span class="string">"{prompt}"</span>);
    <span class="kw">while let </span><span class="prelude-val">Some</span>(token) = result.next().<span class="kw">await </span>{
        <span class="macro">print!</span>(<span class="string">"{token}"</span>);
    }
}</code></pre></div>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt id="reexport.kalosm_sample"><code>pub use <a class="mod" href="../kalosm_sample/index.html" title="mod kalosm_sample">kalosm_sample</a>;</code></dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.BoxedChatConstraintsForType.html" title="struct kalosm_language_model::BoxedChatConstraintsForType">Boxed<wbr>Chat<wbr>Constraints<wbr>ForType</a></dt><dd>A constraints for <a href="trait.CreateDefaultChatConstraintsForType.html" title="trait kalosm_language_model::CreateDefaultChatConstraintsForType"><code>CreateDefaultChatConstraintsForType</code></a> that work with boxed <a href="trait.StructuredChatModel.html" title="trait kalosm_language_model::StructuredChatModel"><code>StructuredChatModel</code></a>s.</dd><dt><a class="struct" href="struct.BoxedChatModel.html" title="struct kalosm_language_model::BoxedChatModel">Boxed<wbr>Chat<wbr>Model</a></dt><dd>A boxed <a href="trait.ChatModel.html" title="trait kalosm_language_model::ChatModel"><code>ChatModel</code></a>.</dd><dt><a class="struct" href="struct.BoxedChatSession.html" title="struct kalosm_language_model::BoxedChatSession">Boxed<wbr>Chat<wbr>Session</a></dt><dd>A boxed <a href="trait.ChatSession.html" title="trait kalosm_language_model::ChatSession"><code>ChatSession</code></a>.</dd><dt><a class="struct" href="struct.BoxedCompletionConstraintsForType.html" title="struct kalosm_language_model::BoxedCompletionConstraintsForType">Boxed<wbr>Completion<wbr>Constraints<wbr>ForType</a></dt><dd>A constraints for <a href="trait.CreateDefaultCompletionConstraintsForType.html" title="trait kalosm_language_model::CreateDefaultCompletionConstraintsForType"><code>CreateDefaultCompletionConstraintsForType</code></a> that work with boxed <a href="trait.TextCompletionModel.html" title="trait kalosm_language_model::TextCompletionModel"><code>TextCompletionModel</code></a>s.</dd><dt><a class="struct" href="struct.BoxedStructuredChatModel.html" title="struct kalosm_language_model::BoxedStructuredChatModel">Boxed<wbr>Structured<wbr>Chat<wbr>Model</a></dt><dd>A boxed <a href="trait.StructuredChatModel.html" title="trait kalosm_language_model::StructuredChatModel"><code>StructuredChatModel</code></a>.</dd><dt><a class="struct" href="struct.BoxedStructuredTextCompletionModel.html" title="struct kalosm_language_model::BoxedStructuredTextCompletionModel">Boxed<wbr>Structured<wbr>Text<wbr>Completion<wbr>Model</a></dt><dd>A boxed <a href="struct.BoxedStructuredTextCompletionModel.html" title="struct kalosm_language_model::BoxedStructuredTextCompletionModel"><code>BoxedStructuredTextCompletionModel</code></a>.</dd><dt><a class="struct" href="struct.BoxedTextCompletionModel.html" title="struct kalosm_language_model::BoxedTextCompletionModel">Boxed<wbr>Text<wbr>Completion<wbr>Model</a></dt><dd>A boxed <a href="trait.TextCompletionModel.html" title="trait kalosm_language_model::TextCompletionModel"><code>TextCompletionModel</code></a>.</dd><dt><a class="struct" href="struct.BoxedTextCompletionSession.html" title="struct kalosm_language_model::BoxedTextCompletionSession">Boxed<wbr>Text<wbr>Completion<wbr>Session</a></dt><dd>A boxed <a href="trait.TextCompletionSession.html" title="trait kalosm_language_model::TextCompletionSession"><code>TextCompletionSession</code></a>.</dd><dt><a class="struct" href="struct.CachedEmbeddingModel.html" title="struct kalosm_language_model::CachedEmbeddingModel">Cached<wbr>Embedding<wbr>Model</a></dt><dd>Embedding models can be expensive to run. This struct wraps an embedding model with a cache that stores embeddings that have been computed before.</dd><dt><a class="struct" href="struct.Chat.html" title="struct kalosm_language_model::Chat">Chat</a></dt><dd><a href="struct.Chat.html" title="struct kalosm_language_model::Chat"><code>Chat</code></a> is a chat interface that builds on top of <a href="trait.ChatModel.html" title="trait kalosm_language_model::ChatModel"><code>crate::ChatModel</code></a> and <a href="trait.StructuredChatModel.html" title="trait kalosm_language_model::StructuredChatModel"><code>crate::StructuredChatModel</code></a>. It makes it easy to create a chat session with streaming responses, and constraints.
Let’s start with a simple chat application:</dd><dt><a class="struct" href="struct.ChatMessage.html" title="struct kalosm_language_model::ChatMessage">Chat<wbr>Message</a></dt><dd>A single item in the chat history.</dd><dt><a class="struct" href="struct.ChatResponseBuilder.html" title="struct kalosm_language_model::ChatResponseBuilder">Chat<wbr>Response<wbr>Builder</a></dt><dd>A builder for a chat response. This is returned by <a href="struct.Chat.html#method.add_message" title="method kalosm_language_model::Chat::add_message"><code>Chat::add_message</code></a> and can be modified until you start awaiting the response.</dd><dt><a class="struct" href="struct.DynEmbedder.html" title="struct kalosm_language_model::DynEmbedder">DynEmbedder</a></dt><dd>A trait object for an embedder.</dd><dt><a class="struct" href="struct.Embedding.html" title="struct kalosm_language_model::Embedding">Embedding</a></dt><dd>Embeddings</dd><dt><a class="struct" href="struct.EmbeddingInput.html" title="struct kalosm_language_model::EmbeddingInput">Embedding<wbr>Input</a></dt><dd>The input to an embedding model. This includes the text to be embedded and the type of embedding to output.</dd><dt><a class="struct" href="struct.GenerationParameters.html" title="struct kalosm_language_model::GenerationParameters">Generation<wbr>Parameters</a></dt><dd>Parameters to use when generating text.</dd><dt><a class="struct" href="struct.NoConstraints.html" title="struct kalosm_language_model::NoConstraints">NoConstraints</a></dt><dd>A marker type that indicates that no constraints were supplied.</dd><dt><a class="struct" href="struct.Task.html" title="struct kalosm_language_model::Task">Task</a></dt><dd>A task session lets you efficiently run a task with a model. The task session will reuse the model’s cache to avoid re-feeding the task prompt repeatedly.</dd><dt><a class="struct" href="struct.TextCompletionBuilder.html" title="struct kalosm_language_model::TextCompletionBuilder">Text<wbr>Completion<wbr>Builder</a></dt><dd>A builder for a text completion response. This is returned by <a href="trait.TextCompletionModelExt.html#method.complete" title="method kalosm_language_model::TextCompletionModelExt::complete"><code>TextCompletionModelExt::complete</code></a>
and can be modified with <a href="struct.TextCompletionBuilder.html#method.with_sampler" title="method kalosm_language_model::TextCompletionBuilder::with_sampler"><code>TextCompletionBuilder::with_sampler</code></a> and <a href="struct.TextCompletionBuilder.html#method.with_constraints" title="method kalosm_language_model::TextCompletionBuilder::with_constraints"><code>TextCompletionBuilder::with_constraints</code></a>
until you start awaiting the response.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.EmbeddingVariant.html" title="enum kalosm_language_model::EmbeddingVariant">Embedding<wbr>Variant</a></dt><dd>The type of embedding the model should output. For models that output different embeddings for queries and documents, this</dd><dt><a class="enum" href="enum.MessageType.html" title="enum kalosm_language_model::MessageType">Message<wbr>Type</a></dt><dd>The type of a chat message</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.ChatModel.html" title="trait kalosm_language_model::ChatModel">Chat<wbr>Model</a></dt><dd>A trait for unstructured chat models. This trait is required for any chat models
even if they do not support structured generation. While this trait is implemented for
all chat models, most methods to use models that implement this trait are implemented
in the <a href="trait.ChatModelExt.html" title="trait kalosm_language_model::ChatModelExt"><code>ChatModelExt</code></a> trait.</dd><dt><a class="trait" href="trait.ChatModelExt.html" title="trait kalosm_language_model::ChatModelExt">Chat<wbr>Model<wbr>Ext</a></dt><dd>An extension trait for chat models with helpers for handling chat sessions. This trait is implemented automatically for all <a href="trait.ChatModel.html" title="trait kalosm_language_model::ChatModel"><code>crate::ChatModel</code></a>s.</dd><dt><a class="trait" href="trait.ChatSession.html" title="trait kalosm_language_model::ChatSession">Chat<wbr>Session</a></dt><dd>Chat Session</dd><dt><a class="trait" href="trait.CreateChatSession.html" title="trait kalosm_language_model::CreateChatSession">Create<wbr>Chat<wbr>Session</a></dt><dd>A trait for creating a chat session. While it the core trait
every chat session implementation implements, most methods to use models that implement
this trait are implemented in the <a href="trait.ChatModelExt.html" title="trait kalosm_language_model::ChatModelExt"><code>ChatModelExt</code></a> trait.</dd><dt><a class="trait" href="trait.CreateDefaultChatConstraintsForType.html" title="trait kalosm_language_model::CreateDefaultChatConstraintsForType">Create<wbr>Default<wbr>Chat<wbr>Constraints<wbr>ForType</a></dt><dd>A trait that defines the default constraints for a type with this chat model.</dd><dt><a class="trait" href="trait.CreateDefaultCompletionConstraintsForType.html" title="trait kalosm_language_model::CreateDefaultCompletionConstraintsForType">Create<wbr>Default<wbr>Completion<wbr>Constraints<wbr>ForType</a></dt><dd>A trait that defines the default constraints for a type with this model.</dd><dt><a class="trait" href="trait.CreateTextCompletionSession.html" title="trait kalosm_language_model::CreateTextCompletionSession">Create<wbr>Text<wbr>Completion<wbr>Session</a></dt><dd>A trait for creating a text completion session for a model. While it the core trait
every text completion model must implement, most methods to use models that implement
this trait are implemented in the <a href="trait.TextCompletionModelExt.html" title="trait kalosm_language_model::TextCompletionModelExt"><code>TextCompletionModelExt</code></a> trait.</dd><dt><a class="trait" href="trait.Embedder.html" title="trait kalosm_language_model::Embedder">Embedder</a></dt><dd>A model that can be used to embed text. This trait is generic over the vector space that the model uses to help keep track of what embeddings came from which model.</dd><dt><a class="trait" href="trait.EmbedderCacheExt.html" title="trait kalosm_language_model::EmbedderCacheExt">Embedder<wbr>Cache<wbr>Ext</a></dt><dd>An extension trait for <a href="trait.Embedder.html" title="trait kalosm_language_model::Embedder"><code>Embedder</code></a> that allows for caching embeddings.</dd><dt><a class="trait" href="trait.EmbedderExt.html" title="trait kalosm_language_model::EmbedderExt">Embedder<wbr>Ext</a></dt><dd>An extension trait for <a href="trait.Embedder.html" title="trait kalosm_language_model::Embedder"><code>Embedder</code></a> with helper methods for iterators, and types that can be converted into a string.</dd><dt><a class="trait" href="trait.IntoChatMessage.html" title="trait kalosm_language_model::IntoChatMessage">Into<wbr>Chat<wbr>Message</a></dt><dd>A trait for types that can be converted into a chat message.</dd><dt><a class="trait" href="trait.IntoEmbedding.html" title="trait kalosm_language_model::IntoEmbedding">Into<wbr>Embedding</a></dt><dd>Convert a type into an embedding with an embedding model.</dd><dt><a class="trait" href="trait.ModelBuilder.html" title="trait kalosm_language_model::ModelBuilder">Model<wbr>Builder</a></dt><dd>A builder that can create a model asynchronously.</dd><dt><a class="trait" href="trait.ModelConstraints.html" title="trait kalosm_language_model::ModelConstraints">Model<wbr>Constraints</a></dt><dd>A type that can constrain the output of a model into a specific output type.</dd><dt><a class="trait" href="trait.StreamExt.html" title="trait kalosm_language_model::StreamExt">Stream<wbr>Ext</a></dt><dd>An extension trait for <code>Stream</code>s that provides a variety of convenient
combinator functions.</dd><dt><a class="trait" href="trait.StructuredChatModel.html" title="trait kalosm_language_model::StructuredChatModel">Structured<wbr>Chat<wbr>Model</a></dt><dd>A trait for unstructured chat models that support structured generation. While this trait is implemented for
all structured chat models, most methods to use models that implement this trait are implemented
in the <a href="trait.ChatModelExt.html" title="trait kalosm_language_model::ChatModelExt"><code>ChatModelExt</code></a> trait.</dd><dt><a class="trait" href="trait.StructuredTextCompletionModel.html" title="trait kalosm_language_model::StructuredTextCompletionModel">Structured<wbr>Text<wbr>Completion<wbr>Model</a></dt><dd>A trait for text completion models that support structured generation. While this trait is implemented for
all structured text completion models, most methods to use models that implement this trait are implemented
in the <a href="trait.TextCompletionModelExt.html" title="trait kalosm_language_model::TextCompletionModelExt"><code>TextCompletionModelExt</code></a> trait.</dd><dt><a class="trait" href="trait.TextCompletionModel.html" title="trait kalosm_language_model::TextCompletionModel">Text<wbr>Completion<wbr>Model</a></dt><dd>A trait for unstructured text completion models. This trait is required for any text completion models
even if they do not support structured generation. While this trait is implemented for all text completion models,
most methods to use models that implement this trait are implemented in the <a href="trait.TextCompletionModelExt.html" title="trait kalosm_language_model::TextCompletionModelExt"><code>TextCompletionModelExt</code></a> trait.</dd><dt><a class="trait" href="trait.TextCompletionModelExt.html" title="trait kalosm_language_model::TextCompletionModelExt">Text<wbr>Completion<wbr>Model<wbr>Ext</a></dt><dd>Text Completion Models</dd><dt><a class="trait" href="trait.TextCompletionSession.html" title="trait kalosm_language_model::TextCompletionSession">Text<wbr>Completion<wbr>Session</a></dt><dd>Text Completion Session</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.prompt_input.html" title="fn kalosm_language_model::prompt_input">prompt_<wbr>input</a></dt><dd>A simple helper function for prompting the user for input.</dd></dl></section></div></main></body></html>