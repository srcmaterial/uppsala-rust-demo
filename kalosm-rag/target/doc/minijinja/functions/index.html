<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Global functions and abstractions."><title>minijinja::functions - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-916cea96.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="minijinja" data-themes="" data-resource-suffix="" data-rustdoc-version="1.87.0 (17067e9ac 2025-05-09)" data-channel="1.87.0" data-search-js="search-e7298875.js" data-settings-js="settings-d72f25bb.js" ><script src="../../static.files/storage-82c7156e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-fb8c74a8.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../minijinja/index.html"><img src="https://github.com/mitsuhiko/minijinja/raw/main/artwork/logo-square.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../minijinja/index.html"><img src="https://github.com/mitsuhiko/minijinja/raw/main/artwork/logo-square.png" alt="logo"></a><h2><a href="../../minijinja/index.html">minijinja</a><span class="version">2.10.2</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module functions</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#using-functions" title="Using Functions">Using Functions</a></li><li><a href="#custom-functions" title="Custom Functions">Custom Functions</a></li><li><a href="#arguments-in-custom-functions" title="Arguments in Custom Functions">Arguments in Custom Functions</a></li><li><a href="#note-on-keyword-arguments" title="Note on Keyword Arguments">Note on Keyword Arguments</a></li><li><a href="#built-in-functions" title="Built-in Functions">Built-in Functions</a></li></ul><h3><a href="#traits">Module Items</a></h3><ul class="block"><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate minijinja</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">minijinja</a></div><h1>Module <span>functions</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/minijinja/functions.rs.html#1-461">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Global functions and abstractions.</p>
<p>This module provides the abstractions for functions that can registered as
global functions to the environment via
<a href="../struct.Environment.html#method.add_function" title="method minijinja::Environment::add_function"><code>add_function</code></a>.</p>
<h2 id="using-functions"><a class="doc-anchor" href="#using-functions">§</a>Using Functions</h2>
<p>Functions can be called in any place where an expression is valid.  They
are useful to retrieve data.  Some functions are special and provided
by the engine (like <code>super</code>) within certain context, others are global.</p>
<p>The following is a motivating example:</p>
<div class="example-wrap"><pre class="language-jinja"><code>&lt;pre&gt;{{ debug() }}&lt;/pre&gt;</code></pre></div><h2 id="custom-functions"><a class="doc-anchor" href="#custom-functions">§</a>Custom Functions</h2>
<p>A custom global function is just a simple rust function which accepts optional
arguments and then returns a result.  Global functions are typically used to
perform a data loading operation.  For instance these functions can be used
to expose data to the template that hasn’t been provided by the individual
render invocation.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>minijinja::{Error, ErrorKind};

<span class="kw">fn </span>include_file(name: String) -&gt; <span class="prelude-ty">Result</span>&lt;String, Error&gt; {
    std::fs::read_to_string(<span class="kw-2">&amp;</span>name)
        .map_err(|e| Error::new(
            ErrorKind::InvalidOperation,
            <span class="string">"cannot load file"
        </span>).with_source(e))
}

env.add_function(<span class="string">"include_file"</span>, include_file);</code></pre></div>
<h2 id="arguments-in-custom-functions"><a class="doc-anchor" href="#arguments-in-custom-functions">§</a>Arguments in Custom Functions</h2>
<p>All arguments in custom functions must implement the <a href="../value/trait.ArgType.html" title="trait minijinja::value::ArgType"><code>ArgType</code></a> trait.
Standard types, such as <code>String</code>, <code>i32</code>, <code>bool</code>, <code>f64</code>, etc, already implement this trait.
There are also helper types that will make it easier to extract an arguments with custom types.
The <a href="../value/struct.ViaDeserialize.html" title="struct minijinja::value::ViaDeserialize"><code>ViaDeserialize&lt;T&gt;</code></a> type, for instance, can accept any
type <code>T</code> that implements the <code>Deserialize</code> trait from <code>serde</code>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>minijinja::value::ViaDeserialize;

<span class="attr">#[derive(Deserialize)]
</span><span class="kw">struct </span>Person {
    name: String,
    age: i32,
}

<span class="kw">fn </span>is_adult(person: ViaDeserialize&lt;Person&gt;) -&gt; bool {
    person.age &gt;= <span class="number">18
</span>}

env.add_function(<span class="string">"is_adult"</span>, is_adult);</code></pre></div>
<h2 id="note-on-keyword-arguments"><a class="doc-anchor" href="#note-on-keyword-arguments">§</a>Note on Keyword Arguments</h2>
<p>MiniJinja inherits a lot of the runtime model from Jinja2.  That includes support for
keyword arguments.  These however are a concept not native to Rust which makes them
somewhat uncomfortable to work with.  In MiniJinja keyword arguments are implemented by
converting them into an extra parameter represented by a map.  That means if you call
a function as <code>foo(1, 2, three=3, four=4)</code> the function gets three arguments:</p>
<div class="example-wrap"><pre class="language-json"><code>[1, 2, {&quot;three&quot;: 3, &quot;four&quot;: 4}]</code></pre></div>
<p>If a function wants to disambiguate between a value passed as keyword argument or not,
the <a href="../value/struct.Value.html#method.is_kwargs" title="method minijinja::value::Value::is_kwargs"><code>Value::is_kwargs</code></a> can be used which returns <code>true</code> if a value represents
keyword arguments as opposed to just a map.  A more convenient way to work with keyword
arguments is the <a href="../value/struct.Kwargs.html" title="struct minijinja::value::Kwargs"><code>Kwargs</code></a> type.</p>
<h2 id="built-in-functions"><a class="doc-anchor" href="#built-in-functions">§</a>Built-in Functions</h2>
<p>When the <code>builtins</code> feature is enabled a range of built-in functions are
automatically added to the environment.  These are also all provided in
this module.  Note though that these functions are not to be
called from Rust code as their exact interface (arguments and return types)
might change from one MiniJinja version to another.</p>
</div></details><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.Function.html" title="trait minijinja::functions::Function">Function</a></dt><dd>A utility trait that represents global functions.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.debug.html" title="fn minijinja::functions::debug">debug</a></dt><dd>Outputs the current context or the arguments stringified.</dd><dt><a class="fn" href="fn.dict.html" title="fn minijinja::functions::dict">dict</a></dt><dd>Creates a dictionary.</dd><dt><a class="fn" href="fn.namespace.html" title="fn minijinja::functions::namespace">namespace</a></dt><dd>Creates a new container that allows attribute assignment using the <code>{% set %}</code> tag.</dd><dt><a class="fn" href="fn.range.html" title="fn minijinja::functions::range">range</a></dt><dd>Returns a range.</dd></dl></section></div></main></body></html>